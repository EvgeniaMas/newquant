"use strict";const current_level=document.getElementById("current_level"),current_move=document.getElementById("current_move"),back_move=document.getElementById("back_move"),information=document.getElementById("information"),back_tutorial=document.getElementById("back_tutorial"),next_tutorial=document.getElementById("next_tutorial"),max_moves_text=document.getElementById("max_moves_text"),first_tutorial_show=document.getElementById("first_tutorial_show"),close_modal=document.getElementById("close_modal"),notification_modal=document.getElementById("notification_modal"),notification_message=document.getElementById("notification_message"),overlay=document.getElementById("overlay"),pass_modal=document.getElementById("pass_modal"),back_move_modal=document.getElementById("back_move_modal"),level_redone=document.getElementById("level_redone"),modal_buttons=document.getElementById("modal_buttons"),to_level=document.getElementById("to_level"),game_field=document.getElementById("game_field"),close_info=document.getElementById("close_info"),info_section=document.getElementById("info_section");let close=document.getElementById("close"),sequence=[[3,2,1],[1,1,2],[1,3,3]],gatter_ind=4,working_sequence=sequence.map(e=>e.slice()),gatter_in_action=null,reset_mode=!1;const quants_cells=document.getElementsByClassName("quants_cells");let playerGameState={moves:[]};playerGameState.moves.push(working_sequence);let box,solution,solution_sequence=[[[3,2,2],[2,2,2],[1,3,3]],[[3,1,2],[1,2,1],[2,3,3]],[[2,3,3],[1,2,2],[1,3,3]],[[2,1,2],[3,1,2],[2,2,2]],[[3,2,1],[2,3,1],[1,3,2]],[[1,2,1],[1,1,2],[2,2,2]],[[3,2,1],[1,2,1],[1,3,3]],[[1,1,2],[3,1,2],[3,3,3]]],gatters_images=['<div class="game_gatter_info"><span class="gatter_symbol">X</span> <br> <span class="gatter_word"> Gatter</span></div>','<div class="game_gatter_info"><span class="gatter_symbol">H0</span> <br> <span class="gatter_word"> Gatter</span></div>','<div class="game_gatter_info"><span class="gatter_symbol">H1</span><br> <span class="gatter_word"> Gatter</span></div>','<div class="game_gatter_info"><span class="gatter_symbol">SWAP</span> <br> <span class="gatter_word"> Gatter</span></div>','<div class="game_gatter_info"><span class="gatter_symbol">SNOT</span> <br> <span class="gatter_word"> Gatter</span></div>'],attempt=[0,[0,0],0,0],moves=0,level=0,max_moves=[2,3,2,3,2,2,2,3],available_moves=max_moves[level];function solvedLevel(e,t){for(var i=0;i<3;i++)for(var n=0;n<3;n++)if(e[i][n]!==t[i][n])return!1;return!0}function notifyPlayer(e){notification_message.innerHTML=e,overlay.style.display="block",fadeIn(notification_modal)}function fadeOut(e){var t=1,i=setInterval(function(){t<=.1&&clearInterval(i),e.style.opacity=t,t-=.1*t},10);e.style.display="none"}function fadeIn(e){e==tutorial_show&&(tutorial[0].classList.contains("tutorial_block2")?document.getElementById("h_gatter1_interactive").classList.add("active"):(tutorial[0].classList.contains("tutorial_block3")||tutorial[0].classList.contains("tutorial_block4"))&&((quibits_trainfirst_container=document.querySelectorAll(".interactive")).forEach(e=>{e.addEventListener("click",setClickedQuibits)}),quibits_trainfirst_container.forEach(e=>{e.removeEventListener("touchstart",touchStart_interactive),e.removeEventListener("touchmove",touchMove_interactive),e.removeEventListener("touchend",touchEnd_interactive)})));var t=.01;e.style.opacity=0,e.style.display="block";var i=setInterval(function(){t>=1&&clearInterval(i),e.style.opacity=t,t+=.1*t},10)}let combination=[];function overMoves(){modal_buttons.style.display="block",pass_modal.style.display="none",setTimeout(function(){notifyPlayer('<p class="tutorial_text centered_text"> Du hast die maximale Anzahl von Zügen erreicht. <br><br> Drücke auf "Rückgängig", um einen Zug zurückzuziehen oder starte den Level erneut.</p>')},1e3)}function cellClick(e){if(moves>=available_moves)overMoves();else{if(!gatter_in_action){return notifyPlayer('<p class="tutorial_text centered_text error_gatter">Du hast das Gatter nicht gewählt!</p><div class ="images_block">'+createImageGatter()+"</div>"),!1}if("snot_gatter"==gatter_in_action||"swap_gatter"==gatter_in_action){let t=e.target||window.event;if(t.classList.contains("quants")&&(t=e.target.parentNode),t.classList.contains("active")){t.classList.remove("active");let e=t.getAttribute("id");if(combination.length>1){combination.indexOf(e)&&combination.splice(active_index,1)}else combination=[]}else{t.classList.add("active");let e=t.getAttribute("id");combination.unshift(e);t.childNodes[0].id.charAt(0),t.childNodes[0].id.charAt(2);2==combination.length&&("swap_gatter"==gatter_in_action?swapGatter():"snot_gatter"==gatter_in_action&&snotGatter(),setTimeout("resetGatter(gatter_in_action)",1200))}}}}function createPattern(e){let t=document.createElement("table"),i=document.createElement("tbody");t.id="game_target",t.appendChild(i);for(let t=0;t<3;++t){let n=document.createElement("tr");for(let i=0;i<3;++i){let a=document.createElement("td"),l=solution_sequence[e][t][i];l=1==l?'<div class="white_quant mini"></div>':2==l?'<div class="black_quant mini"></div>':'<div class="sup_quant mini"></div>',a.innerHTML=l,n.appendChild(a)}i.appendChild(n)}1==solution.childNodes.length&&solution.removeChild(solution.firstChild),solution.appendChild(t)}function buildGame(e){let t=document.createElement("table"),i=document.createElement("tbody");t.id="game_field",t.appendChild(i);for(let t=0;t<3;++t){let n=document.createElement("tr");for(let i=0;i<3;++i){let a=document.createElement("td");a.classList.add("quibits_container"),a.setAttribute("id",t+" "+i),a.onclick=cellClick;let l=e[t][i];l=1==l?'<div class="quants white_quant"></div>':2==l?'<div class="quants black_quant"></div>':'<div class="quants sup_quant"></div>',a.innerHTML=l,n.appendChild(a)}i.appendChild(n)}1==box.childNodes.length&&box.removeChild(box.firstChild),box.appendChild(t),document.querySelectorAll(".quibits_container").forEach(e=>{e.addEventListener("touchstart",touchStart),e.addEventListener("touchmove",touchMove),e.addEventListener("touchend",touchEnd)})}function backMoveRun(){if(moves>0){--moves,back_move.classList.add("active");playerGameState.moves.length;buildGame(working_sequence=playerGameState.moves[0]),current_move.innerText=moves,playerGameState.moves.splice(0,1)}0==moves&&back_move.classList.remove("active")}function closeModal(){fadeOut(notification_modal),overlay.style.display="none"}function turnOnGatter(){const e=document.getElementById("x_gatter"),t=document.getElementById("h_gatter1"),i=document.getElementById("h_gatter2"),n=document.getElementById("swap_gatter"),a=document.getElementById("snot_gatter");2==level||3==level?(e.style.display="inline-block",t.style.display="inline-block",i.style.display="inline-block",n.style.display="none",a.style.display="none"):4==level?(e.style.display="inline-block",t.style.display="none",i.style.display="none",n.style.display="inline-block",a.style.display="none"):5==level?(e.style.display="none",t.style.display="inline-block",i.style.display="inline-block",n.style.display="inline-block",a.style.display="none"):6==level?(e.style.display="inline-block",t.style.display="none",i.style.display="none",n.style.display="none",a.style.display="inline-block"):7==level&&(e.style.display="inline-block",t.style.display="inline-block",i.style.display="inline-block",n.style.display="none",a.style.display="inline-block");let l=document.querySelectorAll(".game_gatter");if(l.length>1)for(let e=0;e<l.length;e++)l[e].classList.remove("active")}function resetGameState(){moves<available_moves&&(++moves,current_move.innerText=moves,buildGame(working_sequence),combination=[],moves>0&&back_move.classList.add("active"))}function applyGatter(e){if(0==combination.length){if(gatter_in_action){createImageGatter()}return modal_buttons.style.display="none",pass_modal.style.display="inline-block",!1}if(combination.length<2){let e;return notifyPlayer(e="swap_gatter"==gatter_in_action||"snot_gatter"==gatter_in_action?'<p class="tutorial_text centered_text">Wähle zwei Qubits!</p>':'<p class="tutorial_text centered_text">Wähle eine Zeile oder eine Spalte!</p>'),modal_buttons.style.display="none",pass_modal.style.display="inline-block",!1}let t,i,n=working_sequence.map(e=>e.slice());playerGameState.moves.unshift(n);let a=combination[0].charAt(0),l=combination[0].charAt(2),o=combination[1].charAt(0),r=combination[1].charAt(2);switch(e){case"x_gatter":if(a!=o&&l!=r){notifyPlayer('<p class="tutorial_text centered_text"> Wähle eine Spalte oder eine Zeile!</P>'),modal_buttons.style.display="none",pass_modal.style.display="inline-block"}else a==o?(t=!0,i=!1):l==r&&(i=!0,t=!1),i?applyVerticalGatter():applyHorizontalGatter();break;case"h_gatter1":case"h_gatter2":if(a!=o&&l!=r){notifyPlayer('<p class="tutorial_text centered_text">Wähle eine Spalte oder eine Zeile!</p>'),modal_buttons.style.display="none",pass_modal.style.display="inline-block"}else a==o?(t=!0,i=!1):l==r&&(i=!0,t=!1),i?applyVerticalGatter():applyHorizontalGatter();break;case"swap_gatter":swapGatter();break;case"snot_gatter":snotGatter()}checkUpSequence()}function swapGatter(){let e=combination[0].charAt(0),t=combination[0].charAt(2),i=combination[1].charAt(0),n=combination[1].charAt(2),a=working_sequence[e][t],l=working_sequence[i][n];working_sequence[e][t]=l,working_sequence[i][n]=a,checkUpSequence()}function snotGatter(){let e=combination[0].charAt(0),t=combination[0].charAt(2),i=combination[1].charAt(0),n=combination[1].charAt(2),a=working_sequence[i][n];working_sequence[e][t]=a,checkUpSequence()}close_info&&close_info.addEventListener("click",function(){fadeOut(info_section)});let index_gatter,single_gatter,gatterItems=document.querySelectorAll(".game_gatter");for(index_gatter=0;index_gatter<gatterItems.length;index_gatter++){let e;(single_gatter=gatterItems[index_gatter]).addEventListener("click",function(t){if((e=t.target.classList.contains("gatter_symbol")||t.target.classList.contains("gatter_word")?t.target.closest(".game_gatter"):t.target).classList.contains("active"))e.classList.remove("active"),gatter_in_action=null;else{let i=document.querySelectorAll(".game_gatter");if(i.length>1)for(let e=0;e<i.length;e++)i[e].classList.remove("active");if(e.classList.add("active"),gatter_in_action=e.getAttribute("id"),2==combination.length)if("swap_gatter"==gatter_in_action)swapGatter();else if("snot_gatter"==gatter_in_action)snotGatter();else if(1==combination.length){notifyPlayer('<p class="tutorial_text centered_text"> Wähle zwei Qubits!</p>'),modal_buttons.style.display="none",pass_modal.style.display="inline-block",document.getElementById(combination[0]).classList.remove("active"),combination=[]}t.preventDefault()}})}let quibit_startx,quibit_starty,initial_id,initial,el,index=0,tutorial=document.querySelectorAll(".tutorial_block1"),index_length=tutorial.length;function checkTutorial(){level<=1?tutorial=document.querySelectorAll(".tutorial_block1"):level<3?(tutorial=document.querySelectorAll(".tutorial_block2"),interactive_gatter="h_gatter1_interactive"):level<5?tutorial=document.querySelectorAll(".tutorial_block3"):level>5&&(tutorial=document.querySelectorAll(".tutorial_block4"))}function cleanTutorial(){let e=document.querySelectorAll(".tutorial_section");for(var t=0;t<e.length;t++)e[t].classList.remove("active");if(tutorial[0].classList.add("active"),index=0,1==tutorial.length){next_tutorial.style.display="none",to_level.style.display="inline-block";let e=level+1;to_level.innerHTML="<span>Zu Level "+e+'<img class="arrow_button" src="img/arrow_right.png" alt="game"></span>'}else next_tutorial.style.display="inline-block",to_level.style.display="none";index_length=tutorial.length}function checkUpSequence(){if(resetGameState(),1==solvedLevel(working_sequence,solution_sequence[level])){if(8==++level){return void(document.getElementById("finish").style.display="block")}if(setTimeout(function(){working_sequence=sequence.map(e=>e.slice()),turnOnGatter(),current_level.innerText=level+1,moves=0,available_moves=max_moves[level],current_move.innerText=moves,max_moves_text.innerText=available_moves,back_move.classList.remove("active"),createPattern(level),buildGame(sequence)},2100),2==level||4==level||6==level)checkTutorial(),cleanTutorial(),back_tutorial.classList.add("disabled"),to_level.classList.add("disabled"),fadeIn(tutorial_show);else{let e='<p class="tutorial_title_text small ">Glückwunsch</p><p class="tutorial_text centered_text">Glückwunsch! Du hast dieses Level erfolgreich gelöst!</p>';setTimeout(function(){notifyPlayer(e)},2e3),modal_buttons.style.display="none",pass_modal.style.display="inline_block"}}}function applyHorizontalGatter(){let e=combination[0].charAt(0);combination[0].charAt(2);switch(gatter_in_action){case"x_gatter":for(let t=0;t<3;t++)1==working_sequence[e][t]?working_sequence[e][t]=2:2==working_sequence[e][t]&&(working_sequence[e][t]=1);break;case"h_gatter1":for(let t=0;t<3;t++)1==working_sequence[e][t]?working_sequence[e][t]=3:3==working_sequence[e][t]&&(working_sequence[e][t]=1);break;case"h_gatter2":for(let t=0;t<3;t++)1==working_sequence[e][t]?working_sequence[e][t]=3:3==working_sequence[e][t]&&(working_sequence[e][t]=2)}checkUpSequence()}function applyVerticalGatter(){combination[0].charAt(0);let e=combination[0].charAt(2);switch(gatter_in_action){case"x_gatter":for(let t=0;t<3;t++)1==working_sequence[t][e]?working_sequence[t][e]=2:2==working_sequence[t][e]&&(working_sequence[t][e]=1);break;case"h_gatter1":for(let t=0;t<3;t++)1==working_sequence[t][e]?working_sequence[t][e]=3:3==working_sequence[t][e]&&(working_sequence[t][e]=1);break;case"h_gatter2":for(let t=0;t<3;t++)1==working_sequence[t][e]?working_sequence[t][e]=3:3==working_sequence[t][e]&&(working_sequence[t][e]=2)}checkUpSequence()}function handleLine(e){for(let t=0;t<3;t++){let i=e+" "+t;document.getElementById(i).classList.add("active"),combination.unshift(i)}setTimeout("applyHorizontalGatter()",1e3)}function handleColumn(e){for(let t=0;t<3;t++){let i=t+" "+e;combination.unshift(i),document.getElementById(i).classList.add("active")}setTimeout("applyVerticalGatter()",1e3)}function resetGatter(e){if(2!=gatter_ind)return gatter_in_action?(gatter_in_action=null,document.getElementById(e).classList.remove("active"),!1):void(interactive_gatter&&(document.getElementById(e).classList.remove("active"),interactive_gatter=null))}window.onload=function(){box=document.getElementById("box"),solution=document.getElementById("solution"),createPattern(level),buildGame(sequence)},information.addEventListener("click",function(){let e=document.querySelectorAll(".info_table");for(let t=0;t<e.length;t++)e[t].style.display="none";level<=1?document.getElementById("x_gatter_show").style.display="block":2==level||3==level?(document.getElementById("x_gatter_show").style.display="block",document.getElementById("h1_gatter_show").style.display="block",document.getElementById("h2_gatter_show").style.display="block"):4==level?(document.getElementById("x_gatter_show").style.display="block",document.getElementById("swap_gatter_show").style.display="block"):5==level?(document.getElementById("swap_gatter_show").style.display="block",document.getElementById("h1_gatter_show").style.display="block",document.getElementById("h2_gatter_show").style.display="block"):6==level?(document.getElementById("x_gatter_show").style.display="block",document.getElementById("snot_gatter_show").style.display="block"):7==level&&(document.getElementById("x_gatter_show").style.display="block",document.getElementById("h2_gatter_show").style.display="block",document.getElementById("h1_gatter_show").style.display="block",document.getElementById("snot_gatter_show").style.display="block"),fadeIn(info_section)}),close.addEventListener("click",function(){fadeOut(tutorial_show),gatter_ind=4,cleanTutorial()}),next_tutorial.addEventListener("click",function(e){if(tutorial[index].classList.remove("active"),++index==index_length-1){index=index_length-1,next_tutorial.style.display="none",to_level.style.display="inline-block";let e=level+1;to_level.innerHTML="<span>Zu Level "+e+'<img class="arrow_button" src="img/arrow_right.png" alt="game"></span>',index>0&&back_tutorial.classList.remove("disabled")}else index>0?back_tutorial.classList.remove("disabled"):0==index&&back_tutorial.classList.add("disabled");tutorial[index].classList.add("active")}),back_tutorial.addEventListener("click",function(e){next_tutorial.style.display="inline-block",to_level.style.display="none",tutorial[index].classList.remove("active"),--index<=0?index=0:index<index_length-1&&next_tutorial.classList.remove("disabled"),0==index&&back_tutorial.classList.add("disabled"),tutorial[index].classList.add("active")}),close_modal.addEventListener("click",function(e){closeModal()}),back_move.addEventListener("click",function(e){backMoveRun()}),back_move_modal.addEventListener("click",function(e){closeModal(),backMoveRun()}),pass_modal.addEventListener("click",function(e){closeModal()}),level_redone.addEventListener("click",function(e){closeModal(),moves=0,back_move.classList.remove("active"),working_sequence=sequence.map(e=>e.slice()),available_moves=max_moves[level],current_move.innerText=moves,max_moves_text.innerText=available_moves,createPattern(level),buildGame(sequence),resetGatter(gatter_in_action)}),to_level.addEventListener("click",function(e){fadeOut(tutorial_show),gatter_ind=4,checkTutorial(),cleanTutorial()});let current_direction,diffX,diffY,initialX=null,initialY=null;function touchStart(e){moves>=available_moves?overMoves():(initialX=e.touches[0].clientX,initialY=e.touches[0].clientY,el=e.target||window.event,initial=el.classList.contains("quants")?e.target.parentNode:e.target,initial_id=initial.getAttribute("id"))}function touchMove(e){if(null===initialX)return;if(null===initialY)return;let t=e.touches[0].clientX,i=e.touches[0].clientY;diffX=initialX-t,diffY=initialY-i,current_direction=Math.abs(diffX)>Math.abs(diffY)?diffX>0?"left":"right":diffY>0?"up":"down",e.preventDefault()}function touchEnd(e){if(!gatter_in_action){return notifyPlayer('<p class="tutorial_text centered_text error_gatter">Du hast das Gatter nicht gewählt!</p><div class ="images_block">'+createImageGatter()+"</div>"),!1}if("swap_gatter"==gatter_in_action||"snot_gatter"==gatter_in_action)return!1;if(moves>=available_moves)return!1;let t=1.5*document.querySelectorAll(".quibits_container")[0].getBoundingClientRect().width,i=e.changedTouches[0].pageX,n=e.changedTouches[0].pageY;if(!checkUpUserAction(initial_id,current_direction,initialX,i,initialY,n,t,!1))return!1;initialX=null,initialY=null;initial_id.charAt(2);let a=initial_id.charAt(0),l=initial_id.charAt(2),o=working_sequence.map(e=>e.slice());playerGameState.moves.unshift(o),"left"==current_direction||"right"==current_direction?handleLine(a):handleColumn(l),setTimeout("resetGatter(gatter_in_action)",1200),e.preventDefault()}function wrongChoice(){notifyPlayer('<p class="tutorial_text centered_text">Wähle eine Zeile oder eine Spalte!</p>')}function checkUpUserAction(e,t,i,n,a,l,o,r){if("right"==t){let t=["0 0","1 0","2 0"];if(r)for(let e=0;e<t.length;e++)t[e]=t[e]+r;return Math.abs(l-a)>80?(wrongChoice(),!1):(e==t[0]||e==t[1]||e==t[2])&&(!(Math.abs(n-i)<o)||(wrongChoice(),!1))}if("left"==t){let t=["0 2","1 2","2 2"];if(r)for(let e=0;e<t.length;e++)t[e]=t[e]+r;return Math.abs(l-a)>80?(wrongChoice(),!1):(e==t[0]||e==t[1]||e==t[2])&&(!(Math.abs(n-i)<o)||(wrongChoice(),!1))}if("up"==t){let t=["2 0","2 1","2 2"];if(r)for(let e=0;e<t.length;e++)t[e]=t[e]+r;return Math.abs(n-i)>80?(wrongChoice(),!1):(e==t[0]||e==t[1]||e==t[2])&&(!(Math.abs(l-a)<o)||(wrongChoice(),!1))}if("down"==t){let t=["0 0","0 1","0 2"];if(r)for(let e=0;e<t.length;e++)t[e]=t[e]+r;return Math.abs(n-i)>80?(wrongChoice(),!1):(e==t[0]||e==t[1]||e==t[2])&&(!(Math.abs(l-a)<o)||(wrongChoice(),!1))}}let quibits_trainfirst_container=document.querySelectorAll(".interactive");quibits_trainfirst_container.forEach(e=>{e.addEventListener("touchstart",touchStart_interactive),e.addEventListener("touchmove",touchMove_interactive),e.addEventListener("touchend",touchEnd_interactive)});let current_direction_interactive,initial_interctive_id,inter_combination=[],initialX_interactive=null,initialY_interactive=null,current_tutor_index=null;function getPrefix(){let e;return level<2?(e="_first",current_tutor_index=0):2==level||3==level?(e="_second",current_tutor_index=1):4==level?(e="_third",current_tutor_index=2):6==level&&(e="_four",current_tutor_index=3),e}function touchStart_interactive(e){let t;initialX_interactive=e.touches[0].clientX,initialY_interactive=e.touches[0].clientY,t=(el=e.target||window.event).classList.contains("quants")?e.target.parentNode:e.target,initial_interctive_id=t.getAttribute("id")}function touchMove_interactive(e){if(null===initialX_interactive)return;if(null===initialY_interactive)return;let t=e.touches[0].clientX,i=e.touches[0].clientY,n=initialX_interactive-t,a=initialY_interactive-i;current_direction_interactive=Math.abs(n)>Math.abs(a)?n>0?"left":"right":a>0?"up":"down",e.preventDefault()}let interactive_gatter,prefix,interact_combination=[[2,3,3],[1,2,2],[1,3,3]];function touchEnd_interactive(e){if(!interactive_gatter){return notifyPlayer('<p class="tutorial_text centered_text error_gatter">Du hast das Gatter nicht gewählt!</p><div class ="images_block">'+createImageGatterInteractive()+"</div>"),!1}if("swap_gatter_interactive"==interactive_gatter||"snot_gatter_interactive "==interactive_gatter)return!1;let t,i,n,a=1.6*document.querySelectorAll(".interactive")[0].getBoundingClientRect().width,l=e.changedTouches[0].pageX,o=e.changedTouches[0].pageY;if(prefix=getPrefix(),!checkUpUserAction(initial_interctive_id,current_direction_interactive,initialX_interactive,l,initialY_interactive,o,a,prefix))return!1;initialX_interactive=null,initialY_interactive=null;(n=(e.target||window.event).classList.contains("quants")?e.target.parentNode:e.target).getAttribute("id");if("left"==current_direction_interactive||"right"==current_direction_interactive){i="horizontal",t=initial_interctive_id.charAt(0);for(let e=0;e<3;e++){let i=t+" "+e+prefix;document.getElementById(i).classList.add("active")}}else{i="vertical",t=initial_interctive_id.charAt(2);for(let e=0;e<3;e++){let i=e+" "+t+prefix;document.getElementById(i).classList.add("active")}}applyInteractMechanics(t,i,interactive_gatter,prefix),tutorialNotifications(),setTimeout("resetGatter(interactive_gatter)",1200),e.preventDefault()}function applyInteractMechanics(e,t,i,n){if("horizontal"==t)switch(i){case"x_gatter_interactive":for(let t=0;t<3;t++)1==interact_combination[e][t]?interact_combination[e][t]=2:2==interact_combination[e][t]&&(interact_combination[e][t]=1);break;case"h_gatter1_interactive":for(let t=0;t<3;t++)1==interact_combination[e][t]?interact_combination[e][t]=3:3==interact_combination[e][t]&&(interact_combination[e][t]=1);break;case"h_gatter2_interactive":for(let t=0;t<3;t++)1==interact_combination[e][t]?interact_combination[e][t]=3:3==interact_combination[e][t]&&(interact_combination[e][t]=2)}else switch(i){case"x_gatter_interactive":for(let t=0;t<3;t++)1==interact_combination[t][e]?interact_combination[t][e]=2:2==interact_combination[t][e]&&(interact_combination[t][e]=1);break;case"h_gatter1_interactive":for(let t=0;t<3;t++)1==interact_combination[t][e]?interact_combination[t][e]=3:3==interact_combination[t][e]&&(interact_combination[t][e]=1);break;case"h_gatter2_interactive":for(let t=0;t<3;t++)1==interact_combination[t][e]?interact_combination[t][e]=3:3==interact_combination[t][e]&&(interact_combination[t][e]=2)}setTimeout("showInteractResult(prefix)",1e3),setTimeout("resetGatter(interactive_gatter)",1200)}function showInteractResult(e){let t="container"+e,i=document.getElementById(t),n=document.createElement("table"),a=document.createElement("tbody"),l="train"+e;n.id=l,n.classList.add("interactive_table"),n.appendChild(a);for(let t=0;t<3;++t){let i=document.createElement("tr");for(let n=0;n<3;++n){let a=document.createElement("td"),l="quibits"+e;a.classList.add(l,"interactive"),a.setAttribute("id",t+" "+n+e);let o=interact_combination[t][n];o=1==o?'<div class="quants white_quant"></div>':2==o?'<div class="quants black_quant"></div>':'<div class="quants sup_quant"></div>',a.innerHTML=o,i.appendChild(a)}a.appendChild(i)}i.innerHTML="",i.appendChild(n),(quibits_trainfirst_container=document.querySelectorAll(".interactive")).forEach(e=>{e.addEventListener("touchstart",touchStart_interactive),e.addEventListener("touchmove",touchMove_interactive),e.addEventListener("touchend",touchEnd_interactive)})}function interactiveGatter(e){let t=document.getElementById(e);t.classList.contains("active")?(t.classList.remove("active"),interactive_gatter=null):(t.classList.add("active"),interactive_gatter=t.getAttribute("id")),quibits_trainfirst_container=document.querySelectorAll(".interactive"),"swap_gatter_interactive"==interactive_gatter||"snot_gatter_interactive "==interactive_gatter?(quibits_trainfirst_container.forEach(e=>{e.addEventListener("click",setClickedQuibits)}),quibits_trainfirst_container.forEach(e=>{e.removeEventListener("touchstart",touchStart_interactive),e.removeEventListener("touchmove",touchMove_interactive),e.removeEventListener("touchend",touchEnd_interactive)})):quibits_trainfirst_container.forEach(e=>{e.addEventListener("touchstart",touchStart_interactive),e.addEventListener("touchmove",touchMove_interactive),e.addEventListener("touchend",touchEnd_interactive)})}function setClickedQuibits(){if(!interactive_gatter){return notifyPlayer('<p class="tutorial_text centered_text error_gatter">Du hast das Gatter nicht gewählt!</p><div class ="images_block">'+createImageGatterInteractive()+"</div>"),!1}let e=event.target||window.event;if(e.classList.contains("quants")&&(e=event.target.parentNode),e.classList.contains("active")){e.classList.remove("active");let t=e.getAttribute("id");if(inter_combination.length>1){inter_combination.indexOf(t)&&inter_combination.splice(active_index,1)}else inter_combination=[]}else{e.classList.add("active");let t=e.getAttribute("id");inter_combination.unshift(t);e.childNodes[0].id.charAt(0),e.childNodes[0].id.charAt(2);if(2==inter_combination.length){if(prefix=getPrefix(),"swap_gatter_interactive"==interactive_gatter){let e=inter_combination[0].charAt(0),t=inter_combination[0].charAt(2),i=inter_combination[1].charAt(0),n=inter_combination[1].charAt(2),a=interact_combination[e][t],l=interact_combination[i][n];interact_combination[e][t]=l,interact_combination[i][n]=a,inter_combination=[]}else if("snot_gatter_interactive "==interactive_gatter){let e=inter_combination[0].charAt(0),t=inter_combination[0].charAt(2),i=inter_combination[1].charAt(0),n=inter_combination[1].charAt(2),a=interact_combination[i][n];interact_combination[e][t]=a,inter_combination=[]}setTimeout("showInteractResult(prefix)",1e3),setTimeout("resetGatter(interactive_gatter)",1200)}}tutorialNotifications()}function tutorialNotifications(){let e;if(1==current_tutor_index)if(0==attempt[current_tutor_index][0])attempt[current_tutor_index][0]=1,e='<p class="tutorial_title_text small ">Glückwunsch</p><p class="tutorial_text centered_text">Sehr gut, jetzt probiere den Gatter H1 anzuwenden!</p>',setTimeout(function(){notifyPlayer(e)},1500),attempt[current_tutor_index][0]=1,document.getElementById("h_gatter1_interactive").classList.remove("active","game_gatter_interactive"),document.getElementById("h_gatter1_interactive").classList.add("game_gatter_clicked","disabled"),document.getElementById("h_gatter2_interactive").classList.remove("game_gatter_clicked","disabled"),document.getElementById("h_gatter2_interactive").classList.add("game_gatter_interactive","active"),interactive_gatter="h_gatter2_interactive",gatter_ind=2;else{if(0==attempt[current_tutor_index][1]){let e='<p class="tutorial_title_text small ">Glückwunsch</p><p class="tutorial_text centered_text">Sehr gut! Wenn du die Funktionsweise verstanden hast, dann klicke auf den Button „Zu Level 3“, ansonsten kannst du noch rumprobieren, und wenn du so weit bist, kannst du das Level 3 starten.</p>';return setTimeout(function(){notifyPlayer(e)},1500),attempt[current_tutor_index][1]=1,to_level.classList.remove("disabled"),document.getElementById("h_gatter2_interactive").classList.remove("active"),document.getElementById("h_gatter1_interactive").classList.remove("game_gatter_clicked","disabled"),document.getElementById("h_gatter1_interactive").classList.add("game_gatter_interactive"),reset_mode=!0,!1}gatter_ind=4}0==attempt[current_tutor_index]&&(e=2==current_tutor_index?'<p class="tutorial_title_text small ">Glückwunsch</p><p class="tutorial_text centered_text">Sehr gut! Wenn du die Funktionsweise verstanden hast, dann klicke auf den Button „Zu Level 5“, ansonsten kannst du noch rumprobieren, und wenn du so weit bist, kannst du das Level 5 starten.</p>':3==current_tutor_index?'<p class="tutorial_title_text small ">Glückwunsch</p><p class="tutorial_text centered_text">Unser Zielqubitist nun schwarz geworden, hat also den Zustand geändert. Ist unser Kontrollqubit 0, so ändert sich nichts am Zielqubit. Wiederholen CNOT Wenn du die Funktionsweise verstanden hast, dann klicke auf den Button „Zu Level 7“, ansonsten kannst du noch rumprobieren, und wenn du so weit bist, kannst du das Level 7 starten.</p>':'<p class="tutorial_title_text small ">Glückwunsch</p><p class="tutorial_text centered_text">Sehr gut! Wenn du die Funktionsweise verstanden hast, dann klicke auf den Button „Zu Level 1“, ansonsten kannst du noch rumprobieren, und wenn du so weit bist, kannst du das Level 1 starten.</p>',attempt[current_tutor_index]=1,setTimeout(function(){notifyPlayer(e)},1500),to_level.classList.remove("disabled"))}function createImageGatter(){let e;return 0==level||1==level?e=gatters_images[0]:2==level?e=gatters_images[0]+gatters_images[1]+gatters_images[1]:3==level?e=gatters_images[0]+gatters_images[1]+gatters_images[2]:4==level?e=gatters_images[0]+gatters_images[3]:5==level?e=gatters_images[1]+gatters_images[2]+gatters_images[3]:6==level?e=gatters_images[0]+gatters_images[4]:7==level&&(e=gatters_images[0]+gatters_images[2]+gatters_images[4]),e}function createImageGatterInteractive(){let e;return 0==level||1==level?e=gatters_images[0]:level>1&&level<=3?e=gatters_images[1]+gatters_images[2]:level>3&&level<=4?e=gatters_images[3]:level>4&&gatters_images[4],e}document.addEventListener("click",function(e){if(e.target.closest(".game_gatter_interactive")){let t=document.querySelectorAll(".game_gatter_interactive");if(t.length>1)for(let e=0;e<t.length;e++)t[e].classList.remove("active");interactiveGatter(e.target.closest(".game_gatter_interactive").getAttribute("id"))}});